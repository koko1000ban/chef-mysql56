# Generated by Chef for <%= node['hostname'] %>.
# Local modifications will be overwritten.

# remove remote access for root user and set password for local root user
# DELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');
# UPDATE mysql.user SET Password=PASSWORD('<%= node['mysql']['server_root_password'] %>') WHERE User='root';

# Remove test database and access to it
DROP DATABASE IF EXISTS test;
DELETE FROM mysql.db WHERE Db='test' OR Db='test\_%';

# Set the password for root@localhost
#SET PASSWORD FOR 'root'@'localhost' = PASSWORD('<%= node['mysql']['server_root_password'] %>');

<% if node['mysql']['root_network_acl'] -%>
# allow root to connect from a remote network if root_network_acl is not nil
GRANT ALL PRIVILEGES ON *.* TO 'root'@'<%= node['mysql']['root_network_acl'] %>' IDENTIFIED BY '' WITH GRANT OPTION;
<% end -%>
